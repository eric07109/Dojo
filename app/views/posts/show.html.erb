<div class="container">
	<div class="row">
		<div class="col-md-12">
			<h3 class="post_header_item"><%= @post.title %></h3>
			<% if not current_user.collected_posts.include?(@post)%>
				<%= link_to "Collect", add_collection_post_path(post_id: @post), method: :post, class: "btn btn-primary post_header_item" %>
			<% else %>
				<%= link_to "Uncollect", remove_collection_post_path(post_id: @post), method: :delete, class: "btn btn-danger post_header_item" %>
			<% end %>
		</div>
	</div>
	<div class="row post_show_entry">
		<div class="col-md-2 post_show_user">
			<%= render partial: "shared/user_icon", locals: { user: @post.author} %>
		</div>
		<div class="col-md-10">
			<div class="row">
				<div class="col-md-10 post_show_content">
					<%= @post.content%><br>
					<% if @post.attachment.present? %><%= image_tag @post.attachment, class: "img_responsive" %><% end %>
				</div>
				<div class="col-md-2">
					<% if @post.author == current_user%>
						<%= button_tag "X", class: "btn btn-light btn-sm"%>
						<%= button_tag "Edit", class: "btn btn-light btn-sm"%>
					<% end %>
				</div>
			</div>
			<!-- todo 若使用者是該文章/回覆的作者，在本頁面可以同步進行編輯和刪除-->
		</div>
	</div>
	<hr>
	<!-- Comments if any -->
	<% @comments.each do |c| %>
	<div class="row post_show_comment">
		<div class="col-md-2 post_show_user">
			<%= render partial: "shared/user_icon", locals: { user: c.user} %>
		</div>
		<div class="col-md-10">
			<div class="row">
				<div class="col-md-10"><%= c.content %></div>
				<div class="col-md-2">
				<% if c.user == current_user%>
					<%= button_tag "X", class: "btn btn-light btn-sm"%>
					<%= button_tag "Edit", class: "btn btn-light btn-sm"%>
				<% end %>
			</div>
			</div>
		</div>
	</div>
	<%end%>
	<!-- Comment area -->
	<div class="row">
		<div class="col-md-2"></div>
		<div class="col-md-10">
			<div class="row">
				<div class="col-md-10 post_show_comment">
					<%= form_with url: post_comments_path(@post.id, action: 'create'), method: "post" do |form| %>
						<%= form.text_field :content, class: :comment_input%>
						<%= form.submit "Comment" %>
					<% end %>
				</div>
				<div class="col-md-2"></div>
			</div>
		</div>
	</div>
</div>